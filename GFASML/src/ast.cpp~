#ifndef   GFASM_AST
#define   GFASM_AST
#include <iostream>
#include "../../common/utils.cpp"
typedef struct AST_T AST_T;
typedef struct Proc Proc;
typedef struct Block Block;
typedef struct Instruction Instruction;

enum instruction_kind{
  DUP,
  SWAP,
  NOOP
};
struct Instruction{
  instruction_kind kind;
};
struct Block{
  Instruction** body;
  size_t        size;
};

struct Proc{
  const char* name;
  size_t      local_offset;
  Block*      body;
};
enum AST_T_kind{
  ast_proc
};
struct AST_T{  
  AST_T_kind kind;
  union{
    Proc* proc;
  };
};
typedef AST_T** AST_ROOT;
typedef AST_T*  AST_NODE;

#endif /* GFASM_AST */

