#ifndef __gfi_main
#define __gfi_main
#include "../../common/utils.cpp"
#include "./lexer.cpp"
#include "./parser.cpp"

int gfi_main(int argc, char** argv){
  const char* const program = shift(&argc, &argv);
  if(argc == 0){
    usage(stderr, program);
    fprintf(stderr, "ERROR: expected file path.\n");
    exit(1);
  }
  const char*  input_fp  = argv[0];

  while(argc){    
    const char* flag = shift(&argc, &argv);

    if(!strcmp(flag, "-h")){
      usage(stdout, program);
      return 0;
    }
    else {
      input_fp = flag;
    }

  }  

  const char* code_entry_string = get_file_text(input_fp);  
  parse_string(code_entry_string);
  return 1;
}

#endif /*__gfi_main*/
